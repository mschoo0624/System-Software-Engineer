What you should do next (STEP-BY-STEP)
Step 1 — Fix the obvious bugs

Change redirect_input() to open with O_RDONLY

Change track = -1 to track = 0

Remove strcmp(token, ' ') completely

In execute_pipe():

Second child must use STDIN_FILENO (not STDOUT_FILENO)

Don’t call execute_command() inside pipe children

Step 2 — Make the shell actually execute commands

In main():

Remove printf("Command: %s\n", input);

Call:

execute_pipe(input) instead of parse_command() directly

If no pipe:

Check is_builtin()

Otherwise call execute_command()

Step 3 — Return correct exit status

Modify execute_command() to:

Capture waitpid() status

Return WEXITSTATUS(status)

This is required for || to work correctly

Step 4 — Fix pipe execution logic

In execute_pipe():

Use execvp() directly in pipe children

Do not fork again inside execute_command()

Ensure || is checked before |

Step 5 — Add signal handling

Implement signal_handler()

Register:

SIGINT

SIGCHLD

Step 6 — Test incrementally

Run and verify in this order:

ls

pwd

cd ..

echo hi

ls > out.txt

cat < out.txt

sleep 3 &

ls | wc -l

false || echo failed

Step 7 — Clean up memory

Free:

cmd->args[i]

cmd->input_file

cmd->output_file

cmd

(Do this last.)

Step 8 — Optional (only if required)

Add:

jobs

fg

multi-pipe (a | b | c)

&&

If you follow these steps in order…

You will end with a fully working mini-shell that:

runs external commands

supports redirection

supports | and ||

handles background processes

survives Ctrl+C

If you want, next I can:

turn this into a final submission checklist

help you debug one step at a time

show what your grader will test
